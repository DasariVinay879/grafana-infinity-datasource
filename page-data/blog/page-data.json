{"componentChunkName":"component---src-pages-blog-tsx","path":"/blog/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"excerpt":"Github Stats image We can leverage Github graphql API to query the github stats using this infinity plugin graphql api. Sample Query given…","html":"<h2>Github Stats</h2>\n<p><img src=\"https://user-images.githubusercontent.com/153843/93846498-1d9abf80-fc9c-11ea-90ed-4c569b088d99.png#center\" alt=\"image\"></p>\n<p>We can leverage <a href=\"https://docs.github.com/en/graphql\">Github graphql API</a> to query the github stats using this infinity plugin graphql api.</p>\n<p>Sample Query given in the below example. You can customize your query to bring the stats you needed.</p>\n<h2>Query Editor</h2>\n<p><img src=\"https://user-images.githubusercontent.com/153843/93736996-d3510a00-fbd9-11ea-8c05-065758d66e82.png#center\" alt=\"image\"></p>\n<p><img src=\"https://user-images.githubusercontent.com/153843/93737011-e1068f80-fbd9-11ea-8c82-ea516f83cf3d.png#center\" alt=\"image\"></p>\n<p>Query Used:</p>\n<deckgo-highlight-code language=\"graphql\" terminal=\"carbon\" theme=\"vscode\"  >\n          <code slot=\"code\">{\n  repository(owner: &quot;$GithubUser&quot;, name: &quot;$GithubRepo&quot;) {\n    issues(last: 20) {\n      edges {\n        node {\n          author {\n            login\n          }\n          state\n          title\n          url\n        }\n      }\n    }\n  }\n}</code>\n        </deckgo-highlight-code>\n<h2>Datasource Configuration</h2>\n<p>Select <strong>Basic user authentication</strong> mode and use your github username and PAT token as password</p>\n<p><img src=\"https://user-images.githubusercontent.com/153843/93736929-b1578780-fbd9-11ea-9413-5585ff79d3a8.png#center\" alt=\"image\"></p>\n<h2>Github Organization Summary example</h2>\n<p><img src=\"https://user-images.githubusercontent.com/153843/93846498-1d9abf80-fc9c-11ea-90ed-4c569b088d99.png#center\" alt=\"image\"></p>\n<p>corresponding query used is given below</p>\n<deckgo-highlight-code language=\"graphql\" terminal=\"carbon\" theme=\"vscode\"  >\n          <code slot=\"code\">{\n  repositoryOwner(login: &quot;$GithubUser&quot;) {\n    repositories(first: 100) {\n      data: nodes {\n        name\n        stargazers {\n          totalCount\n        }\n        openissues: issues(states: OPEN) {\n          totalCount\n        }\n        openpr: pullRequests(states: OPEN) {\n          totalCount\n        }\n      }\n    }\n  }\n}</code>\n        </deckgo-highlight-code>\n<p>Note:</p>\n<ul>\n<li>Queries are not paginated</li>\n<li>Github rate limits apply</li>\n<li>If you need paginated and full set of results, use grafana <a href=\"https://grafana.com/grafana/plugins/grafana-github-datasource\">github stats plugin</a></li>\n</ul>","frontmatter":{"title":"Github","slug":"/blog/github","date":"2022-01-28"}}},{"node":{"excerpt":"AWS Status Feeds in Grafana In this example, we are going to see how we can use AWS status feeds as Grafana annotations. This will be useful…","html":"<h2>AWS Status Feeds in Grafana</h2>\n<p>In this example, we are going to see how we can use AWS status feeds as Grafana annotations. This will be useful when you are dealing with any AWS outages. For this, we are going to use the <a href=\"https://status.aws.amazon.com/rss/all.rss\">AWS RSS feed</a>. You can find more feeds at <a href=\"https://status.aws.amazon.com/\">AWS Status page</a></p>\n<p><img src=\"https://user-images.githubusercontent.com/153843/151575227-20088546-4368-4066-a91b-64058982544b.png#center\" alt=\"image\"></p>\n<h2>Connection setup</h2>\n<p><a href=\"https://status.aws.amazon.com/rss/all.rss\">AWS status feeds</a> are open and no authentication required. So, you can simple create a datasource using infinity without any additional configuration.</p>\n<h2>Annotation setup</h2>\n<p>In your dashboard, Once you create a annotation you will perform the following steps</p>\n<ul>\n<li>Create a annotation and select your Infinity datasource</li>\n<li>Select \"XML\" as query type, \"URL\" as source and Format \"Data Frame\"</li>\n<li>Provide <code>https://status.aws.amazon.com/rss/all.rss</code> as the URL</li>\n<li>You need to specify <code>rss.channel[0].item</code> as the URL. ( You can find this path from the original rss feed )</li>\n<li>Create <code>title</code>, <code>description</code> as columns and provide string type</li>\n<li>Create <code>pubDate</code> column and mark this as 'DateTime'</li>\n<li>Finally select <code>guid[0]._</code> as string. This is your link. So you can alias this to link</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/153843/151575928-4fc9f188-7f9a-43c5-a92a-6069fe434e6a.png\" alt=\"image\"></p>\n<p>Reference feed item is given below</p>\n<deckgo-highlight-code language=\"xml\" terminal=\"carbon\" theme=\"vscode\"  >\n          <code slot=\"code\">&lt;item&gt;\n    &lt;title&gt;&lt;![CDATA[Service is operating normally: [RESOLVED] SMS Delivery Delays]]&gt;&lt;/title&gt;\n    &lt;link&gt;http://status.aws.amazon.com/&lt;/link&gt;\n    &lt;pubDate&gt;Fri, 14 Jan 2022 14:44:00 PST&lt;/pubDate&gt;\n    &lt;guid isPermaLink=&quot;false&quot;&gt;http://status.aws.amazon.com/#sns-us-east-1_1642200240&lt;/guid&gt;\n    &lt;description&gt;&lt;![CDATA[Between 5:14 AM and 11:38 AM PST, we experienced increased delivery latency while delivering SMS messages using US toll-free numbers. Also starting at 5:14 AM, SMS message delivery receipts were delayed, which created a backlog of undelivered delivery receipts. We are continuing to work with our downstream partners to clear this backlog. Receipts for new SMS deliveries will also be delayed until this backlog clears. The issues have been resolved and the service is operating normally.]]&gt;&lt;/description&gt;\n    &lt;/item&gt;</code>\n        </deckgo-highlight-code>\n<h2>Table view of status items</h2>\n<p>You can follow the same query procedure in your table panel to get the results as Table</p>\n<p><img src=\"https://user-images.githubusercontent.com/153843/151576874-6f4d73d2-9331-4473-a7aa-a3eae0bec880.png#center\" alt=\"image\"></p>\n<h2>Alternate query method</h2>\n<p>If you are familiar with <a href=\"/grafana-infinity-datasource/wiki/uql\">UQL query</a>, you can achieve this with a simple query. Instead of selecting \"XML\" as your query type, you will choose \"UQL\" in this method and write the following UQL query.</p>\n<p><img src=\"https://user-images.githubusercontent.com/153843/151577609-d2e5a7c3-aaf8-412b-83b8-965ca676eef4.png#center\" alt=\"image\"></p>\n<deckgo-highlight-code language=\"sql\" terminal=\"carbon\" theme=\"vscode\"  >\n          <code slot=\"code\">parse-xml\n| scope &quot;rss.channel.item&quot;\n| extend &quot;published date&quot;=todatetime(&quot;pubDate&quot;)\n| project &quot;title&quot;, &quot;published date&quot;, &quot;description&quot;, &quot;link&quot;</code>\n        </deckgo-highlight-code>\n<h2>More status feeds</h2>\n<p>With this approach, Not only AWS status feed but you can monitor any RSS feeds also.</p>","frontmatter":{"title":"AWS Status feeds as Grafana annotations","slug":"/blog/aws-status-feeds","date":"2022-01-28"}}},{"node":{"excerpt":"Connecting Grafana with Thingspeak API In this example, we are going to visualize data from ThingSpeak API. For demo purpose, I am using…","html":"<h2>Connecting Grafana with Thingspeak API</h2>\n<p>In this example, we are going to visualize data from ThingSpeak API.</p>\n<p>For demo purpose, I am using <a href=\"https://thingspeak.com/channels/38629\">traffic monitor public channel</a> ( Channel ID : 38629 ). You may know already that, ThingSpeak APIs available in different formats such as JSON, CSV and XML. We are going to see how to use all of those different API formats.</p>\n<h2>JSON Example</h2>\n<p>As you can see in the below picture, I am using the <a href=\"https://thingspeak.com/channels/38629/feed.json\">JSON feed url</a> of the channel. If you look at the JSON schema, my data points are under the node called <code>feeds</code>. So I specify the same as my <code>Rows/Root</code> selector. Then for the columns, we need to first specify our time column which is <code>created_at</code> field in our json feed. Then we can specify one or more metrics(number) fields as shown in the below picture.</p>\n<p><img src=\"https://user-images.githubusercontent.com/153843/108479371-9030bb00-728d-11eb-8ae5-f186c78db64e.png#center\" alt=\"image\"></p>\n<h2>CSV Example</h2>\n<p>If you prefer CSV format over JSON, here is the example settings of the same channel. I am using <a href=\"https://thingspeak.com/channels/38629/feed.csv\">CSV feed url</a> of the channel. In the query, Choose <code>CSV</code> as your type, specify the csv feed URL and then the fields you needed along with time field.</p>\n<p><img src=\"https://user-images.githubusercontent.com/153843/108479976-4b595400-728e-11eb-868e-b2d550f496f3.png#center\" alt=\"image\"></p>\n<h2>XML Example</h2>\n<p>You are not limited to CSV, JSON. You can also use xml format as well in your query if your prefer that. I am using <a href=\"https://thingspeak.com/channels/38629/feed.xml\">XML feed url</a> of the channel. Query setup is almost same as csv/json. Notable configurations are your rows/root field and timestamp field. As you see in the below picture, I am using <code>channel.feeds[0].feed</code> as my root/rows selector and then for selecting timestamp, I use <code>created-at[0]._</code></p>\n<p><img src=\"https://user-images.githubusercontent.com/153843/108480329-b99e1680-728e-11eb-91f3-38c5585477e2.png#center\" alt=\"image\"></p>\n<h2>Using Grafana's time filter</h2>\n<p>Once you setup the query, you may find that your are always querying recent data in the graphs irrespective of the time range chosen in Grafana. To solve this issue, we need to pass the Grafana's dynamic time range in the url. As per the <a href=\"https://community.thingspeak.com/documentation%20.../api/\">ThingSpeak API specification</a>, you need to pass the start and end time to the url as query string params. To do that, I am appending <code>?start=${__from:date:YYYY-MM-DD HH:NN:SS}&#x26;end=${__to:date:YYYY-MM-DD HH:NN:SS}</code> to the url. You can use any variable as specified in the <a href=\"https://grafana.com/docs/grafana/latest/variables/variable-types/global-variables/\">grafana doc</a></p>\n<p>My full url now becomes <code>https://thingspeak.com/channels/38629/feed.json?start=${__from:date:YYYY-MM-DD HH:NN:SS}&#x26;end=${__to:date:YYYY-MM-DD HH:NN:SS}</code>.</p>\n<p><img src=\"https://user-images.githubusercontent.com/153843/108482298-392ce500-7291-11eb-9137-888fc4b3515b.png#center#center\" alt=\"image\"></p>\n<h2>Long time range</h2>\n<p>Typically for up to 2 hour you can get all the metrics without any aggregation. If you are looking for more long time range, you may need to pass aggregation filter to your url. Here in the below example, I am looking for data worth of recent 180days. So i am pulling the aggregated data using the url <code>https://thingspeak.com/channels/38629/feed.json?start=${__from:date:YYYY-MM-DD HH:NN:SS}&#x26;end=${__to:date:YYYY-MM-DD HH:NN:SS}&#x26;average=1440</code> the key to look at here is <strong>average=1440</strong> where it specify to take average of each 1440 minutes/1day. You can specify more granular time aggregation. As per the document, 10, 15, 20, 30, 60, 240, 720, 1440 are the valid time range in minutes. Also instead average you can use sum/timescale/median functions.</p>\n<p><img src=\"https://user-images.githubusercontent.com/153843/108484741-0cc69800-7294-11eb-956b-8dfb74123301.png#center\" alt=\"image\"></p>\n<h2>Note</h2>\n<blockquote>\n<p>This post was originally posted in <a href=\"https://github.com/yesoreyeram/grafana-infinity-datasource/discussions/38\">github discussion</a></p>\n</blockquote>","frontmatter":{"title":"Thingspeak","slug":"/blog/thingspeak","date":"2022-01-28"}}},{"node":{"excerpt":"Hello world Hello world","html":"<h2>Hello world</h2>\n<p>Hello world</p>","frontmatter":{"title":"Hello World","slug":"/blog/hello-world","date":"2022-01-03"}}}]}},"pageContext":{}},"staticQueryHashes":["561970757"]}