"use strict";(self.webpackChunkgatsby_starter_default=self.webpackChunkgatsby_starter_default||[]).push([[489],{5778:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var r=n(7294),i=n(4942),o=n(5671),a=n(3144),c=n(885);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=300,d="https://stackblitz.com",p=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],f=["project","search","ports","settings"],h=["light","dark"],m=["editor","preview"],y={clickToLoad:function(e){return g("ctl",e)},devToolsHeight:function(e){return w("devtoolsheight",e)},forceEmbedLayout:function(e){return g("embed",e)},hideDevTools:function(e){return g("hidedevtools",e)},hideExplorer:function(e){return g("hideExplorer",e)},hideNavigation:function(e){return g("hideNavigation",e)},openFile:function(e){return E("file",e)},showSidebar:function(e){return function(e,t){if("boolean"==typeof t)return"".concat(e,"=").concat(t?"1":"0");return""}("showSidebar",e)},sidebarView:function(e){return b("sidebarView",e,f)},startScript:function(e){return E("startScript",e)},terminalHeight:function(e){return w("terminalHeight",e)},theme:function(e){return b("theme",e,h)},view:function(e){return b("view",e,m)},zenMode:function(e){return g("zenMode",e)}};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.entries(e).map((function(e){var t=(0,c.Z)(e,2),n=t[0],r=t[1];return null!=r&&y.hasOwnProperty(n)?y[n](r):""})).filter(Boolean);return t.length?"?".concat(t.join("&")):""}function g(e,t){return!0===t?"".concat(e,"=1"):""}function w(e,t){if("number"==typeof t&&!Number.isNaN(t)){var n=Math.min(100,Math.max(0,t));return"".concat(e,"=").concat(encodeURIComponent(Math.round(n)))}return""}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).includes(t)?"".concat(e,"=").concat(encodeURIComponent(t)):""}function E(e,t){return(Array.isArray(t)?t:[t]).filter((function(e){return"string"==typeof e&&""!==e.trim()})).map((function(t){return"".concat(e,"=").concat(encodeURIComponent(t))})).join("&")}function _(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function S(e,t){return"".concat(O(t)).concat(e).concat(v(t))}function j(e,t){var n={forceEmbedLayout:!0};return t&&"object"==typeof t&&Object.assign(n,t),"".concat(O(n)).concat(e).concat(v(n))}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return("string"==typeof e.origin?e.origin:d).replace(/\/$/,"")}function q(e,t,n){if(!t||!e||!e.parentNode)throw new Error("Invalid Element");e.id&&(t.id=e.id),e.className&&(t.className=e.className),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.hasOwnProperty.call(t,"height")?"".concat(t.height):"".concat(s),r=Object.hasOwnProperty.call(t,"width")?"".concat(t.width):void 0;e.setAttribute("height",n),r?e.setAttribute("width",r):e.setAttribute("style","width:100%;")}(t,n),e.replaceWith(t)}function P(e){if("string"==typeof e){var t=document.getElementById(e);if(!t)throw new Error("Could not find element with id '".concat(e,"'"));return t}if(e instanceof HTMLElement)return e;throw new Error("Invalid element: ".concat(e))}function I(e){return e&&!1===e.newWindow?"_self":"_blank"}var D=function(){function e(t){(0,o.Z)(this,e),this.pending={},this.port=t,this.port.onmessage=this.messageListener.bind(this)}return(0,a.Z)(e,[{key:"request",value:function(e){var t=this,n=e.type,r=e.payload;return new Promise((function(e,i){var o=_();t.pending[o]={resolve:e,reject:i},t.port.postMessage({type:n,payload:l(l({},r),{},{__reqid:o})})}))}},{key:"messageListener",value:function(e){var t;if("string"==typeof(null===(t=e.data.payload)||void 0===t?void 0:t.__reqid)){var n=e.data,r=n.type,i=n.payload,o=i.__reqid,a=i.__success,c=i.__error;this.pending[o]&&(a?this.pending[o].resolve(this.cleanResult(i)):this.pending[o].reject(c?"".concat(r,": ").concat(c):r),delete this.pending[o])}}},{key:"cleanResult",value:function(e){var t=l({},e);return delete t.__reqid,delete t.__success,delete t.__error,Object.keys(t).length?t:null}}]),e}(),N=function(){function e(t,n){var r=this;(0,o.Z)(this,e),this.editor={openFile:function(e){return r._rdc.request({type:"SDK_OPEN_FILE",payload:{path:e}})},setCurrentFile:function(e){return r._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:e}})},setTheme:function(e){return r._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:e}})},setView:function(e){return r._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:e}})},showSidebar:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return r._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:e}})}},this.preview={origin:"",getUrl:function(){return r._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then((function(e){var t;return null!==(t=null==e?void 0:e.url)&&void 0!==t?t:null}))},setUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";if("string"!=typeof e||!e.startsWith("/"))throw new Error("Invalid argument: expected a path starting with '/', got '".concat(e,"'"));return r._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:e}})}},this._rdc=new D(t),Object.defineProperty(this.preview,"origin",{value:"string"==typeof n.previewOrigin?n.previewOrigin:null,writable:!1})}return(0,a.Z)(e,[{key:"applyFsDiff",value:function(e){var t=function(e){return null!==e&&"object"==typeof e};if(!t(e)||!t(e.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(e.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:e})}},{key:"getDependencies",value:function(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}},{key:"getFsSnapshot",value:function(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}}]),e}(),T=[],k=(0,a.Z)((function e(t){var n=this;(0,o.Z)(this,e),this.id=_(),this.element=t,this.pending=new Promise((function(e,t){var r=function(t){var r=t.data,i=t.ports;"SDK_INIT_SUCCESS"===(null==r?void 0:r.action)&&r.id===n.id&&(n.vm=new N(i[0],r.payload),e(n.vm),o())},i=function(){var e;null===(e=n.element.contentWindow)||void 0===e||e.postMessage({action:"SDK_INIT",id:n.id},"*")};function o(){window.clearInterval(c),window.removeEventListener("message",r)}window.addEventListener("message",r),i();var a=0,c=window.setInterval((function(){if(n.vm)o();else{if(a>=20)return o(),t("Timeout: Unable to establish a connection with the StackBlitz VM"),void T.forEach((function(e,t){e.id===n.id&&T.splice(t,1)}));a++,i()}}),500)})),T.push(this)})),L=function(e){var t,n=e instanceof Element?"element":"id";return null!==(t=T.find((function(t){return t[n]===e})))&&void 0!==t?t:null};function U(e){var t=e.template,n=e.title,r=e.description,i=e.dependencies,o=e.files,a=e.settings;if(!p.includes(t)){var u=p.map((function(e){return"'".concat(e,"'")})).join(", ");console.warn("Unsupported project.template: must be one of ".concat(u))}var l=[],s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";l.push(function(e,t){var n=document.createElement("input");return n.type="hidden",n.name=e,n.value=t,n}(e,"string"==typeof t?t:n))};s("project[title]",n),"string"==typeof r&&r.length>0&&s("project[description]",r),s("project[template]",t,"javascript"),i&&("node"===t?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):s("project[dependencies]",JSON.stringify(i))),a&&s("project[settings]",JSON.stringify(a)),Object.entries(o).forEach((function(e){var t=(0,c.Z)(e,2),n=t[0],r=t[1];s("project[files][".concat(function(e){return e.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}(n),"]"),r)}));var d=document.createElement("form");return d.method="POST",d.setAttribute("style","display:none!important;"),d.append.apply(d,l),d}function x(e){var t;return null!=e&&e.contentWindow?(null!==(t=L(e))&&void 0!==t?t:new k(e)).pending:Promise.reject("Provided element is not an iframe.")}var A={connect:x,embedGithubProject:function(e,t,n){var r=P(e),i=document.createElement("iframe");return i.src=j("/github/".concat(t),n),q(r,i,n),x(i)},embedProject:function(e,t,n){var r,i=P(e),o=function(e,t){var n=U(e);return n.action=j("/run",t),n.id="sb_run","<!doctype html>\n<html>\n<head><title></title></head>\n<body>\n  ".concat(n.outerHTML,"\n  <script>document.getElementById('").concat(n.id,"').submit();<\/script>\n</body>\n</html>")}(t,n),a=document.createElement("iframe");return q(i,a,n),null===(r=a.contentDocument)||void 0===r||r.write(o),x(a)},embedProjectId:function(e,t,n){var r=P(e),i=document.createElement("iframe");return i.src=j("/edit/".concat(t),n),q(r,i,n),x(i)},openGithubProject:function(e,t){var n=S("/github/".concat(e),t),r=I(t);window.open(n,r)},openProject:function(e,t){!function(e,t){var n=U(e);n.action=S("/run",t),n.target=I(t),document.body.appendChild(n),n.submit(),document.body.removeChild(n)}(e,t)},openProjectId:function(e,t){var n=S("/edit/".concat(e),t),r=I(t);window.open(n,r)}},C=n(29),F='parse-json\n| where "age" > 20\n| summarize sum("salary") by "country"\n';function K(){var e=(0,r.useRef)(null);return(0,r.useEffect)((function(){e.current&&A.embedProject(e.current,{files:{"data.txt":JSON.stringify([{name:"Leanne Graham",age:38,country:"USA",occupation:"Devops Engineer",salary:3e3},{name:"Ervin Howell",age:27,country:"USA",occupation:"Software Engineer",salary:2300},{name:"Clementine Bauch",age:17,country:"Canada",occupation:"Student",salary:null},{name:"Patricia Lebsack",age:42,country:"UK",occupation:"Software Engineer",salary:2800},{name:"Leanne Bell",age:38,country:"USA",occupation:"Senior Software Engineer",salary:4e3},{name:"Chelsey Dietrich",age:32,country:"USA",occupation:"Software Engineer",salary:3500}],null,4),"query.uql":F,"index.js":'const fs = require("fs");\n            const uql = require("uql");\n            \n            const fo = { encoding: "utf8", flag: "r" };\n            const data = fs.readFileSync("./data.txt", fo);\n            const query = fs.readFileSync("./query.uql", fo);\n            \n            uql\n              .uql(query, { data })\n              .then(console.table)\n              .catch((ex) => console.error("error occurred while executing the uql query"));',"package.json":JSON.stringify({scripts:{start:"node index.js"},dependencies:{uql:"latest"}},null,4)},template:"node",title:"UQL playground",description:"",settings:{compile:{clearConsole:!0,trigger:"save",action:"hmr"}}},{startScript:"start",openFile:["data.txt","query.uql"],view:"editor",hideExplorer:!0,sidebarView:"project",terminalHeight:50})}),[e]),r.createElement(C.A,{title:"UQL playground"},r.createElement("div",{className:"container py-4"},r.createElement("br",null),r.createElement("div",{className:"h-[600px] w-full",ref:e}),r.createElement("br",null),r.createElement("h5",null,"How to use this playground?"),r.createElement("ol",{className:"list-decimal p-2"},r.createElement("li",{className:"ml-4"},"Edit the ",r.createElement("code",null,"data.txt")," file for the data. ",r.createElement("kbd",null,"ctl+s")," to save. ( ",r.createElement("i",null,"This data can be one of json/csv/tsv/xml/html format.")," )"),r.createElement("li",{className:"ml-4"},"Edit the ",r.createElement("code",null,"query.uql")," file with your UQL query. ",r.createElement("kbd",null,"ctl+s")," to save."),r.createElement("li",{className:"ml-4"},"In the terminal below type ",r.createElement("code",null,"npm start")," and hit enter to see the results.")),r.createElement("br",null)))}}}]);
//# sourceMappingURL=component---src-pages-uql-playground-tsx-0e0be4c9b636807a1272.js.map